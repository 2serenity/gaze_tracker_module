# Модуль В. Тестирование разработанной модели

Сценарии модульного тестирования для оценки качества модели определения направления взгляда (экстрактор признаков + калибратор Ridge).

## Запуск тестов

Из корня проекта:

```bash
python -m unittest discover -s tests -v
```

## Сценарии тестирования

### test_calibrator.py — калибратор (GazeCalibrator)

| Класс | Сценарий | Что проверяется |
|-------|----------|------------------|
| TestGazeCalibratorInit | Инициализация по умолчанию | `fitted == False`, пустые данные |
| | Инициализация с alpha | Параметры Ridge заданы |
| TestGazeCalibratorAddFit | Добавление примеров | Накопление X, Y_x, Y_y |
| | fit при < 3 примерах | Калибратор не переходит в fitted |
| | fit при ≥ 3 примерах | `fitted == True` |
| TestGazeCalibratorPredict | Предсказание до обучения | Возврат (0.5, 0.5) |
| | Предсказание после fit | Результат в [0, 1] |
| | Повторный вызов на тех же данных | Детерминированность |
| | Тип результата | float |
| TestGazeCalibratorSaveLoad | Сохранение и загрузка | Сохранённый fitted и совпадение predict после load |
| | Совпадение предсказаний | Predict до и после load совпадают |

### test_extractor.py — экстрактор (GazeExtractor)

| Класс | Сценарий | Что проверяется |
|-------|----------|------------------|
| TestGazeExtractorInit | Создание экземпляра | face_mesh создан, _ref == None |
| TestGazeExtractorNoFace | Случайное изображение | extract возвращает None |
| | Чёрный кадр | extract возвращает None |
| | Корректный формат (H,W,3) без лица | None |
| TestGazeExtractorReference | reset_reference | _ref сбрасывается в None |

### test_integration.py — интеграция

| Класс | Сценарий | Что проверяется |
|-------|----------|------------------|
| TestExtractorCalibratorPipeline | Предсказание после обучения | Координаты в [0, 1] |
| | Несколько циклов add/fit/predict | Стабильность, корректные типы |

### test_app.py — приложение (конфигурация)

| Класс | Сценарий | Что проверяется |
|-------|----------|------------------|
| TestCalibrationConfig | Форма карты калибровки | 2D, две колонки (x, y) |
| | Значения в [0, 1] | Все координаты в единичном отрезке |
| | FRAMES_PER_POINT | Положительное целое |
| TestAppImports | Класс GazeVisualizationApp | Присутствует в модуле |
| | Функция main | Присутствует и вызываема |

## Зависимости

Используется только стандартный `unittest`. Для работы тестов нужны: `numpy`, `scikit-learn` (калибратор), `opencv-python`, `mediapipe` (экстрактор).
